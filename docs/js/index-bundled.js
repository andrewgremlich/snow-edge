!function(){"use strict";var t=document.querySelector("output");function e(e){var a=document.createTextNode(e),r=document.createElement("pre");r.appendChild(a),t.appendChild(r),r.scrollIntoView()}function a(t,e){this.lives=t.lives,this.xGameStart=t.xPlayerStart,this.yGameStart=t.yPlayerStart,this.xPos=t.xPlayerStart,this.yPos=t.yPlayerStart,this.dead=t.dead,this.dangersNear=0,this.gameObj=e,this.visitedLocations=[[t.xPlayerStart,t.yPlayerStart]]}a.prototype.updateVisitedLocations=function(){this.visitedLocations.push([this.xPos,this.yPos]),this.gameObj.genMap()},a.prototype.move=function(t,a){var r=a-1,n=t-1,i=Math.abs(r-this.xPos),o=Math.abs(n-this.yPos);i>1||o>1?e("✋ Can not move farther than one square"):i>=1||o>=1?(this.xPos=r,this.yPos=n,this.updateVisitedLocations(),this.inDanger()):e("😕 You have inputed invalid coordinates")},a.prototype.inDanger=function(){this.dangersNear=0;var t=!0,a=!1,r=void 0;try{for(var n,i=this.gameObj.dangers[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var o=n.value;o.dangerCoor[0]===this.xPos&&o.dangerCoor[1]===this.yPos&&(1===this.lives?this.die(o.danger):(this.lives--,this.xPos=this.xGameStart,this.yPos=this.yGameStart,e("💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀"),e(o.danger+" You dead bro! 💔"),e("Lost one life. Restarting at "+(this.xGameStart+1)+", "+(this.yGameStart+1)),e("You have "+this.lives+" "+(1===this.lives?"life":"lives")+" left."),this.heartsLeft(),e("💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀")));var s=o.dangerCoor[0],l=o.dangerCoor[1];s-1===this.xPos&&l-1===this.yPos&&this.dangersNear++,s-0===this.xPos&&l-1===this.yPos&&this.dangersNear++,s-1===this.xPos&&l+1===this.yPos&&this.dangersNear++,s-1===this.xPos&&l+0===this.yPos&&this.dangersNear++,s+1===this.xPos&&l+1===this.yPos&&this.dangersNear++,s+0===this.xPos&&l+1===this.yPos&&this.dangersNear++,s+1===this.xPos&&l-1===this.yPos&&this.dangersNear++,s+1===this.xPos&&l-0===this.yPos&&this.dangersNear++}}catch(t){a=!0,r=t}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}},a.prototype.heartsLeft=function(){for(var t="",a=0;a<this.lives;a++)t+="💜";e(t),this.gameObj.genMap()},a.prototype.die=function(t){this.dead=!0,this.dead&&(e(t+" You dead bro!"),e("Will restart on "+window.playGame.difficulty+" difficulty"),o(window.playGame.difficulty))};var r=["You fell off a cliff. Yahoooooooooo! 👍👊","🐺🐺🐺 A pack of wolves got you.  You are not Mowgli? 🐺🐺🐺","❄️ A blizzard trapped you.  Not from Dairy Queen. ❄️","🐻 A bear mauled you.  No safety there!","👣 You saw bigfoot???","🐧 A penguin speared you with its beak.","👅 A moose licked and left you in its tracks.","A reindeer ran over you.","✉️ An email soared out of the sky and smacked you in the head.","Your pizza 🍕 froze ❄️.  You have nothing to eat!","Deadpool popped out from behind a tree and stabbed you. ⚔","You got sick with a cold. 🤒"];function n(t){this.mapDisplay=[],this.player=new a({yPlayerStart:t.yPlayerStart,xPlayerStart:t.xPlayerStart,lives:t.lives,dead:!1},this),this.difficulty=t.difficulty,this.yLength=t.yLength,this.xLength=t.xLength,this.dangers=[],this.suspectedDangers=[],this.yGoal=t.yGoal,this.xGoal=t.xGoal,this.numDangers=t.numDangers}n.prototype.generateUnvisitedAreas=function(){for(var t=0;t<this.yLength;t++){this.mapDisplay.push([]);for(var e=0;e<this.xLength;e++)this.mapDisplay[t].push(".")}var a=!0,r=!1,n=void 0;try{for(var i,o=this.suspectedDangers[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;this.mapDisplay[s[1]-1][s[0]-1]="?"}}catch(t){r=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw n}}},n.prototype.generateVisitedAreas=function(t){var e=!0,a=!1,r=void 0;try{for(var n,i=t[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value,s=o[0],l=o[1],h=0;this.mapDisplay[s][l]="*";var y=!0,d=!1,u=void 0;try{for(var c,p=this.dangers[Symbol.iterator]();!(y=(c=p.next()).done);y=!0){var f=c.value.dangerCoor,g=s,m=l;g+1===f[0]&&m+1===f[1]&&h++,g+1===f[0]&&m-1===f[1]&&h++,g+1===f[0]&&m+0===f[1]&&h++,g+0===f[0]&&m+1===f[1]&&h++,g-1===f[0]&&m+1===f[1]&&h++,g-1===f[0]&&m+0===f[1]&&h++,g-1===f[0]&&m-1===f[1]&&h++,g-0===f[0]&&m-1===f[1]&&h++,g===f[0]&&m===f[1]&&(this.mapDisplay[f[0]][f[1]]="X")}}catch(t){d=!0,u=t}finally{try{!y&&p.return&&p.return()}finally{if(d)throw u}}h>0&&"X"!==this.mapDisplay[s][l]&&(this.mapDisplay[s][l]=h)}}catch(t){a=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}},n.prototype.gameWon=function(){this.player.xPos===this.xGoal&&this.player.yPos===this.yGoal&&(e("🔥🔥🔥🔥🔥 You won the game!  🔥🔥🔥🔥🔥🔥"),e("😄😄😄😄😄😄😄😄😄😄"),e("Will restart on "+window.playGame.difficulty+" difficulty"),o(window.playGame.difficulty))},n.prototype.genMap=function(){var t=this.player.visitedLocations;this.mapDisplay=[],this.generateUnvisitedAreas(),this.generateVisitedAreas(t),this.mapDisplay[this.player.xPos][this.player.yPos]="&",this.mapDisplay[this.xGoal][this.yGoal]="!!",this.gameWon()},n.prototype.genDangers=function(){for(var t=0,e=[];t<=this.numDangers;){var a=Math.floor(Math.random()*this.yLength)+1,n=Math.floor(Math.random()*this.xLength)+1,i=Math.floor(Math.random()*r.length),o=!1,s=!0,l=!1,h=void 0;try{for(var y,d=e[Symbol.iterator]();!(s=(y=d.next()).done);s=!0){var u=y.value;u[0]===a&&u[0]===n&&(o=!0)}}catch(t){l=!0,h=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw h}}o||(this.dangers.push({dangerCoor:[a,n],danger:r[i]}),t++)}this.player.inDanger()};var i={easy:{difficulty:"easy",yLength:10,xLength:10,yPlayerStart:0,xPlayerStart:0,yGoal:8,xGoal:8,numDangers:12,lives:5},medium:{difficulty:"medium",yLength:12,xLength:12,yPlayerStart:1,xPlayerStart:1,yGoal:10,xGoal:10,numDangers:30,lives:3},hard:{difficulty:"hard",yLength:14,xLength:14,yPlayerStart:2,xPlayerStart:2,yGoal:12,xGoal:12,numDangers:70,lives:1},ludicrous:{difficulty:"ludicrous",yLength:14,xLength:14,yPlayerStart:2,xPlayerStart:2,yGoal:12,xGoal:12,numDangers:70,lives:1}};function o(t){var e=new n(i[t]);window.playGame=e,playGame.genMap(),playGame.genDangers()}var s="\nAvailable commands.\n***Basic Commands\n[m]    Show Map\n[h]    Hike Mountain (example command 'h 2 2')\n[s]    Mark suspected danger\n[r]    Remind nearby dangers\n[p]    Show current position\n\n***Help Commands\n[g]    Show guide\n[c]    Show commands again\n[l]    Show Legend\n[d]    Change difficulty\n";function l(t){var a=/\d+/g,r=t.match(a),n=+r[1],i=+r[0];return a.test(t)&&2===r.length?i<1||n<1||i>playGame.xLength||n>playGame.yLength?(e("😕"),e("Must be valid x and y coordinates"),e("Must input coordinates (1,1) to ("+playGame.xLength+","+playGame.yLength+")"),!1):[i,n]:(e("Invalid coordinates"),e("Must be two numbers"),!1)}var h={p:function(){var t=window.playGame.player;e("Your current position is ("+(t.yPos+1)+","+(t.xPos+1)+")")},d:function(t){var a=t.split(" ");2===a.length&&["easy","medium","hard","ludicrous"].includes(a[1])?(o(a[1]),e("Game difficulty changed!")):e("Invalid command.")},r:function(){var t=playGame.player,a=1===t.dangersNear?"is":"are",r=1===t.dangersNear?"danger":"dangers",n=0===t.dangersNear?"":"Be careful!";e("There "+a+" "+t.dangersNear+" "+r+" near by.  "+n)},s:function(t){e("Marking suspected danger on map...");var a=l(t);a&&playGame.suspectedDangers.push(a),this.m()},g:function(){e("\n\n  /*********************************************/\n        Welcome to SnowEdge!\n  /*********************************************/\n\n  You are a daring explorer.  You decided to scale\n  Mount Denali in a snow storm!  You find your way\n  to the top, but be careful!  There are dangers\n  along the way.  You will recieve cues on your\n  map when you are near danger, but you must make\n  the right choice where to go!\n\n  Be careful on this great adventurous endeavor!\n\n  The map is a 10 x 10 grid, with (0,0) starting\n  in the top left corner.\n\n  "+s+"\n                  ")},c:function(){e(""+s)},h:function(t){e("Hiking mountain...");var a=l(t);a&&playGame.player.move(+a[0],+a[1]),this.m()},l:function(){e("\n\n  /*****   MAP LEGEND   *****/\n\n  * '&'     Player Icon\n  * '.'     Unknown location\n  * '*'     Visited location with no danger.\n  * 'X'     Visited location with known danger.\n  * '?'     Location with suspected danger.\n\n  * Nearby dangers appear as a number\n      * i.e. '1' or '2'.\n              ")},m:function(){if("ludicrous"===playGame.difficulty)return e("Map is disabled on ludicrous difficulty.");playGame.genMap();var t="",a=!0,r=!1,n=void 0;try{for(var i,o=playGame.mapDisplay[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value,l=!0,h=!1,y=void 0;try{for(var d,u=s[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){t+=d.value+"\t"}}catch(t){h=!0,y=t}finally{try{!l&&u.return&&u.return()}finally{if(h)throw y}}t+="\n"}}catch(t){r=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw n}}e(t),this.r()}};e("❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️❄️"),e("You have started SNOWEDGE on easy difficulty."),e("Type `g` to see the instructions"),o("easy"),document.onkeydown=function(t){var a=t.keyCode,r=document.activeElement,n=document.querySelector('input[type="text"]');if(13===a&&r===n){var i=n.value,o=Object.keys(h),s=i.charAt(0);o.includes(s)||e("Command not found"),n.value="";var l=!0,y=!1,d=void 0;try{for(var u,c=o[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var p=u.value;p===s&&h[p](i)}}catch(t){y=!0,d=t}finally{try{!l&&c.return&&c.return()}finally{if(y)throw d}}}}}();
